TESTS_CMD:  &TESTS_CMD
  - name: Run tests
    command: python setup.py test
    timeout: 10

UPLOAD_DOCS_CMD:  &UPLOAD_DOCS_CMD
  - name: Upload documentation
    command: pdj-deployer pdj01 software_deploy mongomotor release


builders:
  - name: python3.5
    branches:
      - master

    plugins:
      - name: python-venv
        pyversion: python3.5

    platform: python3.5

    steps:
      - <<: *TESTS_CMD

  - name: python3.6
    branches:
      - master

    plugins:
      - name: python-venv
        pyversion: python3.6

    platform: python3.6

    steps:
      - <<: *TESTS_CMD

  - name: release
    branches:
      - release

    plugins:
      - name: python-venv
        pyversion: python3.6

    platform: python3.6

    steps:
      - <<: *TESTS_CMD
      - <<: *UPLOAD_DOCS_CMD
